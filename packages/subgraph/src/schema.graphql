type Stream @entity {
  id: ID!
  builder: Builder!
  cap: BigInt
  frequency: BigInt
  createdAt: BigInt!
  deposits: [Deposit!] @derivedFrom(field: "stream")
  withdrawals: [Withdrawal!] @derivedFrom(field: "stream")
  totalDeposited: BigInt!
  totalWithdrawn: BigInt!
}

type Builder @entity {
  id: ID!
  streams: [Stream!] @derivedFrom(field: "builder")
  withdrawals: [Withdrawal!] @derivedFrom(field: "builder")
  totalWithdrawn: BigInt!
}

type Funder @entity {
  id: ID!
  createdAt: BigInt
  deposits: [Deposit!] @derivedFrom(field: "funder")
  totalDeposited: BigInt!
}

type Deposit @entity {
  id: ID!
  stream: Stream!
  funder: Funder!
  createdAt: BigInt
  amount: BigInt
  reason: String
  transactionHash: String
}

type Withdrawal @entity {
  id: ID!
  stream: Stream!
  builder: Builder!
  createdAt: BigInt
  amount: BigInt
  reason: String
  transactionHash: String
}
